# 🚨 修正作業ガイドライン - 副作用防止のための重要指針

## 基本原則: **最小変更の法則**

### ❌ 禁止事項
- 指摘された問題以外の「ついでに」修正
- 複数の問題を一度に修正
- 「改善のため」の予防的修正
- 動作している機能への不必要な変更

### ✅ 必須プロセス

#### 1. 修正前の現状把握
```markdown
## 修正前状況
- 現在の動作: [詳細に記録]
- 生成されるファイル: [リスト化]
- 処理フロー: [ステップごとに記録]
- 問題箇所: [ユーザー指摘の問題のみ]
```

#### 2. 修正スコープの明確化
```markdown
## 修正対象
- 対象問題: [ユーザー指摘の問題のみ]
- 修正範囲: [変更する関数・メソッドを明記]
- 非対象: [触らない部分を明記]
- 影響分析: [修正が他に与える影響]
```

#### 3. 段階的修正実施
- **一度に1つの問題のみ修正**
- 修正後、即座に動作確認
- 問題が解決したら次の問題へ

#### 4. 修正後検証
```markdown
## 修正後確認
- 指摘問題: [解決済み ✅]
- 副作用: [新たな問題が発生していないか]
- ファイル生成: [意図しないファイルが生成されていないか]
- 動作変化: [修正対象外の動作が変わっていないか]
```

## 実際の適用例

### ❌ 今回の失敗例
**問題**: CSS文字化け
**やったこと**: CSS問題を修正しつつ、処理フローも変更
**結果**: 不要な目次ファイルが生成される新たな問題

### ✅ 正しいアプローチ
**問題**: CSS文字化け
**やるべきこと**: CSS処理のみ修正
**避けるべき**: ファイル保存処理の変更

## 緊急時の例外ルール

以下の場合のみ、関連部分の修正が許可される：
1. **依存関係**: A問題の修正にB部分の変更が技術的に必須
2. **安全性**: 修正により新たな脆弱性が生じる場合の最小限対策
3. **整合性**: 修正により論理的矛盾が生じる場合の調整

## チェックリスト

修正前に必ず確認：
- [ ] ユーザーの指摘問題を正確に理解したか？
- [ ] 修正対象を最小限に限定したか？
- [ ] 修正が他の動作に影響しないか？
- [ ] 「ついでに」修正しようとしていないか？

修正後に必ず確認：
- [ ] 指摘された問題が解決したか？
- [ ] 新たな問題が発生していないか？
- [ ] 意図しないファイルが生成されていないか？
- [ ] 修正対象外の動作が変わっていないか？

## エスカレーション

以下の場合は修正前にユーザーに確認：
- 修正に伴い他の部分の変更が必要な場合
- 修正方法が複数ある場合
- 修正により既存機能が変わる可能性がある場合

---

**重要**: このガイドラインは過去の失敗から学んだ教訓です。
新しいセッションでは必ずこのファイルを参照してください。